# Dynamic Crawl Pro - æ•™å­¦ç´ ææ™ºèƒ½é‡‡é›†ç³»ç»Ÿ

åŸºäº **CAMEL Agent** æ¡†æ¶çš„æ·±åº¦å†…å®¹é‡‡é›†ç³»ç»Ÿï¼Œä¸“ä¸ºæ•™è‚²åœºæ™¯è®¾è®¡ã€‚æ ¹æ®å¹»ç¯ç‰‡å…³é”®è¯è‡ªåŠ¨ä»äº’è”ç½‘çˆ¬å–é«˜è´¨é‡çš„æ•™å­¦ç´ æï¼Œæ”¯æŒæ™ºèƒ½è¯­ä¹‰è¯„ä¼°å’Œè·¨è¯­è¨€å†…å®¹åŒ¹é…ã€‚

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### æ•™è‚²åœºæ™¯ä¼˜åŒ–
- **å¹»ç¯ç‰‡é©±åŠ¨**ï¼šè¯»å– `decision_result.json`ï¼Œè‡ªåŠ¨ä¸ºæ¯ä¸ªå¹»ç¯ç‰‡ç”Ÿæˆæ•™å­¦ç´ æ
- **å…³é”®è¯ç‹¬ç«‹è¯„ä¼°**ï¼šæ¯ä¸ªå…³é”®è¯å•ç‹¬çˆ¬å–å’Œè¯„åˆ†ï¼Œç¡®ä¿ç²¾å‡†åŒ¹é…
- **ä¸Šä¸‹æ–‡å¢å¼º**ï¼šç»“åˆå¹»ç¯ç‰‡æ ‡é¢˜å’Œä¼˜åŒ–åŸå› ï¼Œç†è§£æ•™å­¦æ„å›¾

### âš¡ æ€§èƒ½ä¼˜åŒ–ï¼ˆ3-5å€æå‡ï¼‰
- **Trafilatura æ­£æ–‡æå–**ï¼šæ™ºèƒ½è¯†åˆ«æ­£æ–‡åŒºåŸŸï¼Œè‡ªåŠ¨ä¸¢å¼ƒå¯¼èˆªã€é¡µè„šã€å¹¿å‘Š
- **æ™ºèƒ½åˆ†å±‚è¯„ä¼°**ï¼šåŸºäº `keyword_hits` æ™ºèƒ½è·¯ç”±ï¼Œå‡å°‘ 85% LLM è°ƒç”¨æˆæœ¬
- **ä¸‰çº§å»é‡æœºåˆ¶**ï¼šURLè§„èŒƒåŒ– + å…¥é˜Ÿå»é‡ + è¯„ä¼°çº§å»é‡ï¼ˆä¸‰å…ƒç»„ï¼‰
- **æ™ºèƒ½é“¾æ¥è¿‡æ»¤**ï¼šä¼˜å…ˆçˆ¬å–æ–‡ç« é¡µï¼Œè‡ªåŠ¨è¿‡æ»¤é¦–é¡µ/æ ç›®é¡µ/åˆ†é¡µ

### ğŸ§  æ™ºèƒ½è´¨é‡è¯„ä¼°
- **è·¨è¯­è¨€è¯­ä¹‰ç†è§£**ï¼šä¸­æ–‡å…³é”®è¯å¯åŒ¹é…è‹±æ–‡å†…å®¹ï¼Œåä¹‹äº¦ç„¶
- **å¤šç»´åº¦è¯„åˆ†**ï¼škeyword_hits åŒ¹é… + è§„åˆ™è¯„åˆ† + LLM è¯­ä¹‰è¯„åˆ†
- **è¯„ä¼°çº§ç²¾ç¡®å»é‡**ï¼š`(content_hash, keyword, context)` ä¸‰å…ƒç»„ï¼Œä¸è¯¯æ€ä¸åŒå…³é”®è¯çš„è¯„ä¼°

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
Dynamic_Crawl_Pro/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agents/                    # æ ¸å¿ƒ Agent å®ç°
â”‚   â”‚   â”œâ”€â”€ crawler.py            # çˆ¬è™« Agentï¼ˆcrawl4ai + trafilaturaï¼‰
â”‚   â”‚   â”œâ”€â”€ extractor.py           # å†…å®¹æå– Agentï¼ˆå…³é”®è¯åŒ¹é…ã€é“¾æ¥æå–ï¼‰
â”‚   â”‚   â””â”€â”€ quality_gate.py        # è´¨é‡è¯„ä¼° Agentï¼ˆCAMEL LLM + è§„åˆ™ï¼‰
â”‚   â”œâ”€â”€ pipeline/
â”‚   â”‚   â””â”€â”€ coordinator.py         # ä»»åŠ¡åè°ƒå™¨ï¼ˆé˜Ÿåˆ—ç®¡ç†ã€å»é‡ã€æ‰©é“¾ï¼‰
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ data_manager.py        # æ•°æ®å…±äº«ä¸ç¼“å­˜
â”‚   â”‚   â”œâ”€â”€ url_utils.py           # URL è§„èŒƒåŒ–ä¸è¿‡æ»¤
â”‚   â”‚   â””â”€â”€ text_utils.py          # æ–‡æœ¬å¤„ç†ï¼ˆå…³é”®è¯åŒ¹é…ã€æ‘˜è¦ï¼‰
â”‚   â””â”€â”€ config.py                   # é›†ä¸­å¼é…ç½®
â”œâ”€â”€ config/
â”‚   â””â”€â”€ preset_seed_urls.json      # é¢„è®¾ç§å­ URLsï¼ˆæŒ‰è¯¾ç¨‹åˆ†ç±»ï¼‰
â”œâ”€â”€ input/
â”‚   â””â”€â”€ decision_result.json       # è¾“å…¥ï¼šå¹»ç¯ç‰‡æ•°æ®
â”œâ”€â”€ output/
â”‚   â””â”€â”€ slide_content_*.json       # è¾“å‡ºï¼šç”Ÿæˆçš„æ•™å­¦ç´ æ
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_trafilatura_simple.py    # trafilatura å¿«é€Ÿæµ‹è¯•
â”‚   â”œâ”€â”€ test_crawler_integration.py    # å®Œæ•´æµç¨‹æµ‹è¯•
â”‚   â””â”€â”€ diagnose_hits.py                # keyword_hits è¯Šæ–­
â”œâ”€â”€ run_crawler.py               # ä¸»å…¥å£
â”œâ”€â”€ requirements.txt             # ä¾èµ–åˆ—è¡¨
â””â”€â”€ .env                         # ç¯å¢ƒå˜é‡ï¼ˆAPI Keyï¼‰
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

**ä¸»è¦ä¾èµ–ï¼š**
- `crawl4ai==0.8.0` - å¼‚æ­¥ç½‘é¡µçˆ¬å–
- `trafilatura==2.0.0` - æ™ºèƒ½æ­£æ–‡æå–
- `camel-ai[rag]==0.2.6` - Agent æ¡†æ¶
- `loguru==0.7.3` - æ—¥å¿—ç®¡ç†

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` ä¸º `.env`ï¼Œå¹¶é…ç½®ï¼š

```env
# LLM é…ç½®ï¼ˆå¿…éœ€ï¼‰
OPENAI_API_KEY=sk-xxxxx
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4o-mini

# å¯é€‰ï¼šä½¿ç”¨å›½å†…ä»£ç†
# OPENAI_BASE_URL=https://api.openai-proxy.org/v1
```

### 3. å‡†å¤‡è¾“å…¥æ•°æ®

åˆ›å»º `input/decision_result.json`ï¼š

```json
{
  "input_file": "/path/to/slides.json",
  "total_pages": 18,
  "decisions": [
    {
      "slide_number": 2,
      "title": "é©¬å…‹æ€ä¸»ä¹‰ä¸å·¥äººè¿åŠ¨ç›¸ç»“åˆ",
      "should_optimize": true,
      "reason": "å¯ä»¥å¼•å¯¼å­¦ç”Ÿæ€è€ƒé©¬å…‹æ€ä¸»ä¹‰å¯¹å½“ä»£åŠ³åŠ¨è€…æƒç›Šçš„æ€è€ƒ",
      "suggested_keywords": ["é©¬å…‹æ€ä¸»ä¹‰", "å·¥äººè¿åŠ¨", "ç¤¾ä¼šå½±å“"]
    },
    {
      "slide_number": 3,
      "title": "å‰©ä½™ä»·å€¼ç†è®º",
      "should_optimize": true,
      "reason": "å¸®åŠ©å­¦ç”Ÿç†è§£èµ„æœ¬ä¸»ä¹‰ç»æµå±æœºçš„æ ¹æº",
      "suggested_keywords": ["å‰©ä½™ä»·å€¼", "èµ„æœ¬ç§¯ç´¯", "ç»æµå±æœº"]
    }
  ]
}
```

### 4. é…ç½®ç§å­ URLs

åœ¨ `config/preset_seed_urls.json` ä¸­æ·»åŠ è¯¾ç¨‹ç›¸å…³çš„ URLsï¼š

```json
{
  "é©¬å…‹æ€ä¸»ä¹‰": [
    "https://www.qstheory.cn/",
    "http://cpc.people.com.cn/",
    "https://www.cssn.cn/"
  ],
  "ç®—æ³•": [
    "https://leetcode.cn/",
    "https://www.geeksforgeeks.org/",
    "https://en.wikipedia.org/wiki/Algorithm"
  ],
  "å¤§å­¦ç‰©ç†": [
    "https://www.phys.psu.edu/",
    "https://hyperphysics.phy-astr.gsu.edu/"
  ]
}
```

### 5. è¿è¡Œçˆ¬è™«

```bash
python run_crawler.py
```

---

## ğŸ”„ æµç¨‹å›¾

### æ•´ä½“æ•°æ®æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è¾“å…¥ï¼šdecision_result.json                      â”‚
â”‚  [                                                               â”‚
â”‚    {                                                              â”‚
â”‚      "slide_number": 2,                                        â”‚
â”‚      "title": "é©¬å…‹æ€ä¸»ä¹‰ä¸å·¥äººè¿åŠ¨ç›¸ç»“åˆ",                        â”‚
â”‚      "suggested_keywords": ["é©¬å…‹æ€ä¸»ä¹‰", "å·¥äººè¿åŠ¨", "ç¤¾ä¼šå½±å“"]   â”‚
â”‚    }                                                              â”‚
â”‚  ]                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      run_crawler.py                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  éå†æ¯ä¸ªå¹»ç¯ç‰‡ï¼ˆshould_optimize=trueï¼‰                          â”‚ â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚    â”‚ å¯¹æ¯ä¸ª suggested_keyword æ‰§è¡Œï¼š                           â”‚  â”‚ â”‚
â”‚  â”‚    â”‚                                                        â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚ 1. åŠ è½½ preset_seed_urls.json                       â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚    (ä¾‹å¦‚ï¼š6ä¸ªé©¬å…‹æ€ä¸»ä¹‰ç›¸å…³çš„ç½‘ç«™)                 â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚                                                        â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚ 2. åˆ›å»º Coordinatorï¼ˆæ·±åº¦çˆ¬è™«ï¼‰                    â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚    - CrawlerAgent: çˆ¬å–ç½‘é¡µ                   â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚    - ExtractorAgent: æå–å†…å®¹+å…³é”®è¯          â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚    - QualityGateAgent: LLMè¯„åˆ†               â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚                                                        â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚ 3. æ·±åº¦çˆ¬å–ï¼ˆmax_depth=1-2ï¼Œmax_pages=30ï¼‰       â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚    - æ‰©å±•é“¾æ¥ï¼Œç»§ç»­çˆ¬å–                             â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚                                                        â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚ 4. è¯»å–çˆ¬å–ç»“æœï¼ˆJSONLï¼‰                           â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚    - åŒ…å« relevance_score                         â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚                                                        â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚ 5. æ’åºå¹¶é€‰æ‹© Top 3                                 â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚    - æŒ‰ relevance_score é™åºæ’åˆ—                 â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â”‚    - é€‰å–æœ€ç›¸å…³çš„ 3 æ¡å†…å®¹                       â”‚  â”‚  â”‚ â”‚
â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è¾“å‡ºï¼šslide_content_*.json                   â”‚
â”‚  {                                                               â”‚
â”‚    "decisions": [                                                 â”‚
â”‚      {                                                            â”‚
â”‚        "keywords_information": {                                 â”‚
â”‚          "é©¬å…‹æ€ä¸»ä¹‰": [                                        â”‚
â”‚            {                                                  â”‚
â”‚              "url": "...",                                  â”‚
â”‚              "summary": "...",                               â”‚
â”‚              "relevance_score": 0.85                          â”‚
â”‚            }                                                  â”‚
â”‚          ]                                                     â”‚
â”‚        }                                                       â”‚
â”‚      }                                                         â”‚
â”‚    ]                                                           â”‚
â”‚  }                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Agent åä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Seed URLs  â”‚â”€â”€â”€â”€â–¶â”‚  CrawlerAgent   â”‚â”€â”€â”€â”€â–¶â”‚ ExtractorAgent   â”‚â”€â”€â”€â”€â–¶â”‚QualityGate   â”‚
â”‚             â”‚     â”‚ (crawl4ai +      â”‚     â”‚ (å…³é”®è¯åŒ¹é… +    â”‚     â”‚  Agent       â”‚
â”‚  6ä¸ªç½‘ç«™     â”‚     â”‚  trafilatura)    â”‚     â”‚  é“¾æ¥æå–)       â”‚     â”‚ (CAMEL LLM)   â”‚
â”‚             â”‚     â”‚                  â”‚     â”‚                  â”‚     â”‚              â”‚
â”‚             â”‚     â”‚  è¾“å‡º:           â”‚     â”‚  è¾“å‡º:           â”‚     â”‚  è¾“å‡º:        â”‚
â”‚             â”‚     â”‚  - clean_content â”‚     â”‚  - main_content  â”‚     â”‚  - score      â”‚
â”‚             â”‚     â”‚  - markdown       â”‚     â”‚  - keyword_hits â”‚     â”‚  - decision   â”‚
â”‚             â”‚     â”‚  - html          â”‚     â”‚  - headings      â”‚     â”‚  - reason     â”‚
â”‚             â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚                        â”‚
                                             â–¼                        â–¼
                                      data_id               extracted_data
                                         (å…±äº«å­˜å‚¨)           (ç»“æ„åŒ–æ•°æ®)
```

---

### æ™ºèƒ½åˆ†å±‚è¯„ä¼°æµç¨‹ï¼ˆèŠ‚çœ 85% æˆæœ¬ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              QualityGateAgent æ™ºèƒ½åˆ†å±‚è¯„ä¼°                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ æå–çš„ç½‘é¡µæ•°æ®                          â”‚
                        â”‚  - url, title, headings                  â”‚
                        â”‚  - main_content (trafilaturaæå–)      â”‚
                        â”‚  - keyword_hits                            â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ å±‚çº§ 0: è¶…å¿«è¿‡æ»¤ (< 80å­—)                         â”‚
            â”‚ content_length < 80 â†’ ç›´æ¥ä¸¢å¼ƒ                      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â”‚ å±‚çº§ 1: keyword_hits â‰¥ 3                       â”‚
                    â”‚  â†’ ç›´æ¥é€šè¿‡ï¼ˆä¸è°ƒç”¨ LLMï¼‰                    â”‚
                    â”‚  â†’ relevance_score = 0.6-0.9               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                               â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                              â”‚ å±‚çº§ 2: keyword_hits = 1-2                    â”‚
                              â”‚  â†’ è°ƒç”¨ CAMEL LLM è¿›è¡Œè¯­ä¹‰è¯„ä¼°        â”‚
                              â”‚  â†’ relevance_score = 0.0-1.0               â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
                                                                 â”‚
                                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                             â”‚ å±‚çº§ 3: keyword_hits = 0                         â”‚
                                             â”‚  â†’ è§„åˆ™è¯„åˆ†ï¼ˆrule_scoreï¼‰                      â”‚
                                             â”‚  â†’ rule_score â‰¥ 0.15 â†’ è°ƒç”¨ LLM         â”‚
                                             â”‚  â†’ rule_score < 0.15 â†’ ç›´æ¥è§„åˆ™å†³ç­–      â”‚
                                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
                                                                         â”‚
                                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                                                     â”‚ å±‚çº§ 4: è§„åˆ™å…œåº•                              â”‚
                                                     â”‚  â†’ rule_score â‰¥ 0.35 â†’ keep              â”‚
                                                     â”‚  â†’ rule_score < 0.35 â†’ discard            â”‚
                                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•ˆæœï¼š100 ä¸ªé¡µé¢ â†’ åªè°ƒç”¨ 30 æ¬¡ LLMï¼ˆèŠ‚çœ 70%ï¼‰
```

---

### æ€§èƒ½ä¼˜åŒ–æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ€§èƒ½ä¼˜åŒ–ä¸‰é‡ä¿éšœ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. URL è§„èŒƒåŒ–  â”‚    â”‚  2. æ™ºèƒ½è¿‡æ»¤  â”‚    â”‚  3. è¯„ä¼°å»é‡   â”‚
â”‚              â”‚    â”‚              â”‚    â”‚              â”‚
â”‚ å»é™¤ trackingâ”‚    â”‚ è¿‡æ»¤é¦–é¡µ/æ ç›®é¡µâ”‚    â”‚ ä¸‰å…ƒç»„å»é‡    â”‚
â”‚ æŠ˜å  index  â”‚    â”‚ ä¼˜å…ˆæ–‡ç« é¡µ   â”‚    â”‚ (content_hash, â”‚
â”‚ Query æ’åº  â”‚    â”‚  è¿‡æ»¤åˆ†é¡µå‚æ•° â”‚    â”‚  keyword,      â”‚
â”‚              â”‚    â”‚              â”‚    â”‚  context)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                   â”‚
       â–¼                  â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•ˆæœ                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ å‡å°‘ 30% é‡å¤ URLï¼ˆtracking å‚æ•°ã€index é¡µé¢ï¼‰                   â”‚
â”‚ â€¢ å‡å°‘ 50% æ— æ•ˆçˆ¬å–ï¼ˆé¦–é¡µã€æ ç›®é¡µã€åˆ†é¡µï¼‰                           â”‚
â”‚ â€¢ å‡å°‘ 20% é‡å¤è¯„ä¼°ï¼ˆç›¸åŒå†…å®¹ä¸é‡å¤ LLMï¼‰                           â”‚
â”‚ â€¢ æ€»è®¡ï¼šæ€§èƒ½æå‡ 3-5 å€ï¼ˆ8åˆ†é’Ÿ â†’ 2åˆ†é’Ÿï¼‰                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ä¸‰çº§å»é‡æœºåˆ¶è¯¦è§£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å»é‡ç­–ç•¥                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çº§åˆ« 1: URL è§„èŒƒåŒ–å»é‡                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ åŸå§‹ URL:                                                        â”‚â”‚
â”‚  â”‚  https://example.com/page.html?utm_source=baidu&page=1         â”‚â”‚
â”‚  â”‚  https://example.com/page.html?spm=xxx&page=1                â”‚â”‚
â”‚  â”‚  https://example.com/page.html                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                           â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ è§„èŒƒåŒ– URL:                                                      â”‚â”‚
â”‚  â”‚  https://example.com/page                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  æ•ˆæœï¼š3ä¸ª URL â†’ 1ä¸ª canonical URL                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çº§åˆ« 2: é˜Ÿåˆ—å»é‡ï¼ˆqueued_urls + visited_urlsï¼‰                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ URL: https://www.example.com/page.html                       â”‚â”‚
â”‚  â”‚  ç¬¬ä¸€æ¬¡é‡åˆ° â†’ åŠ å…¥ queued_urlsï¼ˆå‡†å¤‡å…¥é˜Ÿï¼‰                   â”‚â”‚
â”‚  â”‚  ç¬¬äºŒæ¬¡é‡åˆ° â†’ è·³è¿‡ï¼ˆå·²åœ¨ queued_urls æˆ– visited_urlsï¼‰        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  æ•ˆæœï¼šé¿å…é‡å¤çˆ¬å–åŒä¸€ä¸ª URL                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çº§åˆ« 3: è¯„ä¼°çº§å»é‡ï¼ˆä¸‰å…ƒç»„ç²¾ç¡®å»é‡ï¼‰                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ å…³é”®è¯"é©¬å…‹æ€ä¸»ä¹‰" + å†…å®¹A + å¹»ç¯ç‰‡A                           â”‚â”‚
â”‚  â”‚  â†’ è¯„ä¼°ï¼Œdedup_key = (hashA, "é©¬å…‹æ€ä¸»ä¹‰", "å¹»ç¯ç‰‡Açš„context")    â”‚â”‚
â”‚  â”‚                                                               â”‚â”‚
â”‚  â”‚ å…³é”®è¯"ç¤¾ä¼šå½±å“" + å†…å®¹A + å¹»ç¯ç‰‡A                           â”‚â”‚
â”‚  â”‚  â†’ è¯„ä¼°ï¼ˆä¸åŒå…³é”®è¯ï¼Œæ–°è¯„ä¼°ï¼ï¼‰âœ…                             â”‚â”‚
â”‚  â”‚                                                               â”‚â”‚
â”‚  â”‚ å…³é”®è¯"é©¬å…‹æ€ä¸»ä¹‰" + å†…å®¹A + å¹»ç¯ç‰‡B                           â”‚â”‚
â”‚  â”‚  â†’ è¯„ä¼°ï¼ˆä¸åŒä¸Šä¸‹æ–‡ï¼Œæ–°è¯„ä¼°ï¼ï¼‰âœ…                               â”‚â”‚
â”‚  â”‚                                                               â”‚â”‚
â”‚  â”‚ å…³é”®è¯"é©¬å…‹æ€ä¸»ä¹‰" + å†…å®¹A + å¹»ç¯ç‰‡Aï¼ˆç¬¬äºŒæ¬¡é‡åˆ°ï¼‰                â”‚â”‚
â”‚  â”‚  â†’ è·³è¿‡ï¼ˆä¸‰å…ƒç»„å®Œå…¨ç›¸åŒï¼ï¼‰âŒ                                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  æ•ˆæœï¼š                                                       â”‚
â”‚  âœ… ä¸åŒå…³é”®è¯ç‹¬ç«‹è¯„ä¼°ï¼ˆä¸è¯¯æ€ï¼‰                                 â”‚
â”‚  âœ… ä¸åŒä¸Šä¸‹æ–‡ç‹¬ç«‹è¯„ä¼°ï¼ˆä¸è¯¯æ€ï¼‰                                 â”‚
â”‚  âœ… ç›¸åŒå†…å®¹+ç›¸åŒå…³é”®è¯+ç›¸åŒä¸Šä¸‹æ–‡ â†’ è·³è¿‡ï¼ˆèŠ‚çœæˆæœ¬ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š è¾“å…¥è¾“å‡ºæ ¼å¼

### è¾“å…¥ï¼šdecision_result.json

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `slide_number` | int | å¹»ç¯ç‰‡ç¼–å· |
| `title` | string | å¹»ç¯ç‰‡æ ‡é¢˜ |
| `should_optimize` | bool | æ˜¯å¦éœ€è¦ä¼˜åŒ– |
| `reason` | string | ä¼˜åŒ–åŸå›  |
| `suggested_keywords` | array | å»ºè®®çš„å…³é”®è¯åˆ—è¡¨ |

### è¾“å‡ºï¼šslide_content_*.json

```json
{
  "input_file": "/path/to/slides.json",
  "total_pages": 18,
  "should_optimize_count": 5,
  "crawl_timestamp": "2026-02-04T15:13:02",
  "decisions": [
    {
      "slide_number": 2,
      "title": "é©¬å…‹æ€ä¸»ä¹‰ä¸å·¥äººè¿åŠ¨ç›¸ç»“åˆ",
      "keywords_information": {
        "é©¬å…‹æ€ä¸»ä¹‰": [
          {
            "url": "https://www.qstheory.cn/2025/01/15/c_1130868466184166.htm",
            "title": "é©¬å…‹æ€ä¸»ä¹‰åŸºæœ¬åŸç†",
            "summary": "é©¬å…‹æ€ä¸»ä¹‰æ˜¯ç§‘å­¦çš„ä¸–ç•Œè§‚å’Œæ–¹æ³•è®ºï¼Œæ˜¯ä¸­å›½å…±äº§å…šç«‹å…šç«‹å›½ã€å…´å…šå¼ºå›½çš„æ ¹æœ¬æŒ‡å¯¼æ€æƒ³ã€‚é©¬å…‹æ€ä¸»ä¹‰æ·±åˆ»æ­ç¤ºäº†è‡ªç„¶ç•Œã€äººç±»ç¤¾ä¼šå’Œäººç±»æ€ç»´å‘å±•çš„æ™®éè§„å¾‹...",
            "relevance_score": 0.85,
            "reason": "ç›´æ¥é˜è¿°é©¬å…‹æ€ä¸»ä¹‰çš„æ ¸å¿ƒæ¦‚å¿µï¼Œä¸å…³é”®è¯é«˜åº¦ç›¸å…³ï¼Œå…·æœ‰å¾ˆé«˜çš„æ•™å­¦ä»·å€¼ã€‚"
          }
        ]
      }
    }
  ]
}
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### run_crawler.py æ ¸å¿ƒé…ç½®

```python
# æ·±åº¦çˆ¬è™«é…ç½®
MAX_DEPTH = 2                  # çˆ¬å–æ·±åº¦ï¼ˆ1=ä¸æ‰©é“¾ï¼Œ2=æ·±åº¦çˆ¬å–ï¼‰
MAX_PAGES = 30                # æ¯ä¸ªå…³é”®è¯æœ€å¤šçˆ¬å–é¡µé¢æ•°
MAX_PAGES_PER_DOMAIN = 10     # æ¯ä¸ªåŸŸåæœ€å¤šçˆ¬å–é¡µé¢æ•°
CONCURRENCY = 3               # å¹¶å‘æ•°ï¼ˆå»ºè®®ï¼š5-10ï¼‰

# è´¨é‡ç­›é€‰é…ç½®
TOP_CONTENTS_PER_KEYWORD = 3  # æ¯ä¸ªå…³é”®è¯ä¿ç•™æœ€ç›¸å…³çš„ N æ¡å†…å®¹
MIN_RELEVANCE_SCORE = 0.3     # æœ€ä½ç›¸å…³æ€§åˆ†æ•°
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

| åœºæ™¯ | MAX_DEPTH | MAX_PAGES | CONCURRENCY | é¢„è®¡æ—¶é—´ |
|------|-----------|-----------|-------------|---------|
| **å¿«é€Ÿæµ‹è¯•** | 1 | 10 | 10 | 30ç§’ |
| **å¸¸è§„ä½¿ç”¨** | 1 | 20 | 5 | 1-2åˆ†é’Ÿ |
| **æ·±åº¦çˆ¬å–** | 2 | 30 | 3 | 3-5åˆ†é’Ÿ |

---

## ğŸ—ï¸ Agent æ¶æ„

### 1. CrawlerAgentï¼ˆçˆ¬è™« Agentï¼‰

**èŒè´£**ï¼šä½¿ç”¨ crawl4ai çˆ¬å–ç½‘é¡µï¼Œç”¨ trafilatura æå–å¹²å‡€æ­£æ–‡

**ç‰¹æ€§**ï¼š
- å¼‚æ­¥å¹¶å‘çˆ¬å–
- è‡ªåŠ¨é‡è¯•ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
- Trafilatura æ™ºèƒ½æ­£æ–‡æå–
- è‡ªåŠ¨å›é€€åˆ° markdown

**LLM ä½¿ç”¨**ï¼šâŒ å¦

---

### 2. ExtractorAgentï¼ˆå†…å®¹æå– Agentï¼‰

**èŒè´£**ï¼šä» HTML ä¸­æå–ç»“æ„åŒ–æ•°æ®å’Œé“¾æ¥

**ç‰¹æ€§**ï¼š
- ä¼˜å…ˆä½¿ç”¨ `clean_content`ï¼ˆtrafilatura æå–ï¼‰
- æå–æ ‡é¢˜ã€é“¾æ¥ã€å…³é”®è¯åŒ¹é…
- é“¾æ¥è§„èŒƒåŒ–å’Œè¿‡æ»¤

**LLM ä½¿ç”¨**ï¼šâŒ å¦

---

### 3. QualityGateAgentï¼ˆè´¨é‡è¯„ä¼° Agentï¼‰

**èŒè´£**ï¼šæ™ºèƒ½è¯„ä¼°é¡µé¢ä¸å…³é”®è¯çš„ç›¸å…³æ€§

**æ™ºèƒ½åˆ†å±‚ç­–ç•¥**ï¼š
1. **å±‚çº§ 0**ï¼šè¶…å¿«è¿‡æ»¤ï¼ˆ< 80å­— â†’ ä¸¢å¼ƒï¼‰
2. **å±‚çº§ 1**ï¼škeyword_hits â‰¥ 3 â†’ ç›´æ¥é€šè¿‡ï¼ˆä¸è°ƒç”¨ LLMï¼‰
3. **å±‚çº§ 2**ï¼škeyword_hits = 1-2 â†’ è°ƒç”¨ LLM
4. **å±‚çº§ 3**ï¼škeyword_hits = 0 â†’ è§„åˆ™è¯„åˆ† + å¯é€‰ LLM
5. **å±‚çº§ 4**ï¼šè§„åˆ™å…œåº•

**ç‰¹æ€§**ï¼š
- è·¨è¯­è¨€è¯­ä¹‰ç†è§£ï¼ˆä¸­æ–‡å…³é”®è¯ â†” è‹±æ–‡å†…å®¹ï¼‰
- ä¸Šä¸‹æ–‡å¢å¼ºï¼ˆslide_title + slide_reasonï¼‰
- å¤šç»´åº¦è¯„åˆ†ï¼ˆrelevance_score 0.0-1.0ï¼‰

**LLM ä½¿ç”¨**ï¼šâœ… æ˜¯ï¼ˆCAMEL + GPT-4o-miniï¼‰

---

### 4. TaskCoordinatorï¼ˆä»»åŠ¡åè°ƒå™¨ï¼‰

**èŒè´£**ï¼šåè°ƒå„ Agentï¼Œç®¡ç†é˜Ÿåˆ—å’Œå»é‡

**ä¸‰çº§å»é‡æœºåˆ¶**ï¼š
1. **URL çº§å»é‡**ï¼š`visited_urls` + `queued_urls`
2. **è§„èŒƒåŒ–å»é‡**ï¼šå»é™¤ tracking å‚æ•°ã€æŠ˜å  index é¡µé¢
3. **è¯„ä¼°çº§å»é‡**ï¼š`(content_hash, keyword, context)` ä¸‰å…ƒç»„

**æ™ºèƒ½é“¾æ¥è¿‡æ»¤**ï¼š
- è¿‡æ»¤é¦–é¡µ/æ ç›®é¡µï¼ˆ`/`, `/index.html`, `/node_`ï¼‰
- è¿‡æ»¤åˆ†é¡µå‚æ•°ï¼ˆ`?page=1`, `?p=2`ï¼‰
- ä¼˜å…ˆçˆ¬å–æ–‡ç« é¡µï¼ˆ`.shtml`, `.html`, æ—¥æœŸURLï¼‰

---

## ğŸ“ è¯¾ç¨‹é€‚é…æ€§

### âœ… ç†è®ºä¸Šé€‚é…æ‰€æœ‰è¯¾ç¨‹

é¡¹ç›®ä½¿ç”¨**é€šç”¨æŠ€æœ¯**ï¼Œç†è®ºä¸Šæ”¯æŒä»»ä½•è¯¾ç¨‹ï¼š

| è¯¾ç¨‹ç±»å‹ | ç¤ºä¾‹å…³é”®è¯ | é€‚ç”¨æ€§ |
|---------|-----------|--------|
| **é©¬å…‹æ€ä¸»ä¹‰** | "é©¬å…‹æ€ä¸»ä¹‰", "å·¥äººè¿åŠ¨", "å‰©ä½™ä»·å€¼" | âœ… å·²æµ‹è¯• |
| **ç®—æ³•** | "åŠ¨æ€è§„åˆ’", "äºŒåˆ†æŸ¥æ‰¾", "å›¾è®º" | âœ… å®Œå…¨é€‚é… |
| **å¤§å­¦ç‰©ç†** | "ç‰›é¡¿å®šå¾‹", "ç”µç£æ³¢", "é‡å­åŠ›å­¦" | âœ… å®Œå…¨é€‚é… |
| **è®¡ç®—æœºç§‘å­¦** | "æ•°æ®ç»“æ„", "æ“ä½œç³»ç»Ÿ", "è®¡ç®—æœºç½‘ç»œ" | âœ… å®Œå…¨é€‚é… |
| **æ–‡å­¦** | "ç°å®ä¸»ä¹‰", "å”è¯—å®‹è¯", "ç°ä»£å°è¯´" | âœ… å®Œå…¨é€‚é… |

---

### âš™ï¸ éœ€è¦çš„è°ƒæ•´

#### 1. é¢„è®¾ç§å­ URLsï¼ˆå¿…éœ€ï¼‰

åœ¨ `config/preset_seed_urls.json` ä¸­æ·»åŠ ï¼š

```json
{
  "ç®—æ³•": [
    "https://leetcode.cn/",
    "https://www.geeksforgeeks.org/",
    "https://en.wikipedia.org/wiki/Algorithm"
  ],

  "å¤§å­¦ç‰©ç†": [
    "https://www.phys.psu.edu/",
    "https://hyperphysics.phy-astr.gsu.edu/",
    "https://en.wikipedia.org/wiki/Physics"
  ]
}
```

#### 2. ä¸Šä¸‹æ–‡è¿‡æ»¤è§„åˆ™ï¼ˆå¯é€‰ï¼‰

å¦‚æœæŸäº›è¯¾ç¨‹çš„æ ‡é¢˜ä¸éœ€è¦ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œä¿®æ”¹ `quality_gate.py` çš„è¿‡æ»¤è§„åˆ™ï¼š

```python
# src/agents/quality_gate.py ç¬¬184-189è¡Œ
meaningless_patterns = [
    # é€šç”¨è§„åˆ™
    "å°é¢", "å°åº•", "ç›®å½•", "æ— å†…å®¹",

    # å¯é€‰ï¼šæ·»åŠ ç‰¹å®šè¯¾ç¨‹çš„è§„åˆ™
    # "ç¬¬ä¸€è®²", "ç¬¬äºŒè®²",  # é©¬å…‹æ€ä¸»ä¹‰è¯¾ç¨‹
    # "Unit 1", "Chapter 1",  # è‹±è¯­è¯¾ç¨‹
]
```

#### 3. LLM Promptï¼ˆå¯é€‰è°ƒæ•´ï¼‰

å¦‚æœæŸäº›é¢†åŸŸéœ€è¦ç‰¹æ®Šçš„è¯­ä¹‰ç†è§£ï¼Œå¯ä»¥ä¿®æ”¹ `quality_gate.py` çš„ promptï¼ˆç¬¬206è¡Œå¼€å§‹ï¼‰ã€‚

**å½“å‰ prompt æ˜¯é€šç”¨çš„**ï¼Œé€‚ç”¨äºå¤§å¤šæ•°è¯¾ç¨‹ã€‚

---

## ğŸ”§ æ€§èƒ½ä¼˜åŒ–è¯¦è§£

### æ™ºèƒ½åˆ†å±‚è¯„ä¼°ï¼ˆèŠ‚çœ 85% æˆæœ¬ï¼‰

```
æ€»é¡µé¢æ•°: 100
â”œâ”€ å±‚çº§ 0ï¼ˆå¿«é€Ÿè¿‡æ»¤ï¼‰: 20 é¡µ â†’ ä¸¢å¼ƒï¼ˆ< 80å­—ï¼‰
â”œâ”€ å±‚çº§ 1ï¼ˆkeyword_hits â‰¥ 3ï¼‰: 15 é¡µ â†’ ç›´æ¥é€šè¿‡ï¼ˆä¸è°ƒç”¨ LLMï¼‰
â”œâ”€ å±‚çº§ 2ï¼ˆkeyword_hits = 1-2ï¼‰: 25 é¡µ â†’ è°ƒç”¨ LLM
â”œâ”€ å±‚çº§ 3ï¼ˆkeyword_hits = 0ï¼‰: 30 é¡µ â†’ è§„åˆ™è¯„åˆ† + éƒ¨åˆ†è°ƒç”¨ LLM
â””â”€ å±‚çº§ 4ï¼ˆè§„åˆ™å…œåº•ï¼‰: 10 é¡µ â†’ è§„åˆ™è¯„åˆ†

å®é™… LLM è°ƒç”¨: çº¦ 30 æ¬¡ï¼ˆè€Œä¸æ˜¯ 100 æ¬¡ï¼‰
```

### ä¸‰çº§å»é‡æœºåˆ¶

| å»é‡å±‚çº§ | å»é‡ä¾æ® | æ•ˆæœ |
|---------|---------|------|
| **URL è§„èŒƒåŒ–** | å»é™¤ tracking å‚æ•°ã€æŠ˜å  index é¡µé¢ | å‡å°‘ 30% é‡å¤ URL |
| **å…¥é˜Ÿå»é‡** | `queued_urls` + `visited_urls` | é¿å…é‡å¤çˆ¬å– |
| **è¯„ä¼°å»é‡** | `(content_hash, keyword, context)` | é¿å…é‡å¤ LLM è¯„ä¼° |

### æ™ºèƒ½é“¾æ¥è¿‡æ»¤ï¼ˆå‡å°‘ 50% æ— æ•ˆçˆ¬å–ï¼‰

**è¿‡æ»¤çš„é“¾æ¥ç±»å‹**ï¼š
- é¦–é¡µï¼š`/`, `/index.html`
- æ ç›®é¡µï¼š`/node_`, `/list_`, `/channel_`
- åˆ†é¡µï¼š`?page=1`, `?p=2`
- åª’ä½“æ–‡ä»¶ï¼š`.jpg`, `.pdf`, `.mp4`

**ä¼˜å…ˆçˆ¬å–**ï¼š
- æ–‡ç« é¡µï¼š`.shtml`, `.html`
- æ—¥æœŸURLï¼š`/2026/02/04/`
- æ·±åº¦è·¯å¾„ï¼š`depth >= 2`

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. çˆ¬å–å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥**ï¼š
- ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
- ç›®æ ‡ç½‘ç«™æ˜¯å¦å¯è®¿é—®
- `crawl4ai` å’Œ `trafilatura` æ˜¯å¦æ­£ç¡®å®‰è£…

### 2. LLM è°ƒç”¨æŠ¥é”™ï¼Ÿ

**æ£€æŸ¥**ï¼š
- `.env` æ–‡ä»¶ä¸­çš„ `OPENAI_API_KEY` æ˜¯å¦æ­£ç¡®
- `OPENAI_BASE_URL` æ˜¯å¦å¯è®¿é—®
- æ¨¡å‹åç§°æ˜¯å¦æ­£ç¡®ï¼ˆ`gpt-4o-mini`, `gpt-3.5-turbo`ï¼‰

### 3. keyword_hits éƒ½æ˜¯ 0ï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
- è·¨è¯­è¨€å†…å®¹ï¼ˆä¸­æ–‡å…³é”®è¯ + è‹±æ–‡ç½‘é¡µï¼‰
- ç½‘é¡µæ˜¯é¦–é¡µ/å¯¼èˆªé¡µï¼ˆæ­£æ–‡å°‘ï¼‰
- trafilatura æå–å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å·²å¯ç”¨è·¨è¯­è¨€è¯­ä¹‰ç†è§£ï¼ˆLLM ä¼šè¯„ä¼°ï¼‰
- è°ƒæ•´ `MAX_DEPTH=1`ï¼Œåªçˆ¬å– seed URLs
- æ£€æŸ¥ seed URLs çš„è´¨é‡

### 4. Windows ä¸Šå‡ºç° "I/O operation on closed pipe"ï¼Ÿ

**åŸå› **ï¼šWindows ç‰¹æœ‰çš„å­è¿›ç¨‹æ¸…ç†é—®é¢˜

**å½±å“**ï¼šâŒ ä¸å½±å“åŠŸèƒ½ï¼Œç¨‹åºæ­£å¸¸å®Œæˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¯ä»¥å¿½ç•¥
- æˆ–è€…åœ¨ Linux ä¸Šè¿è¡Œï¼ˆæ¨èï¼‰

---

## ğŸ“ˆ æ›´æ–°æ—¥å¿—

### v2.0.0 (2026-02-04)

**æ–°å¢**ï¼š
- âœ¨ é›†æˆ trafilatura æ™ºèƒ½æ­£æ–‡æå–
- âœ¨ è¯„ä¼°çº§ç²¾ç¡®å»é‡ï¼ˆä¸‰å…ƒç»„ï¼šcontent_hash + keyword + contextï¼‰
- âœ¨ æ™ºèƒ½é“¾æ¥è¿‡æ»¤ï¼ˆä¼˜å…ˆçˆ¬å–æ–‡ç« é¡µï¼‰
- âœ¨ è·¨è¯­è¨€è¯­ä¹‰ç†è§£ï¼ˆä¸­æ–‡å…³é”®è¯ â†” è‹±æ–‡å†…å®¹ï¼‰
- âœ¨ ä¸Šä¸‹æ–‡å¢å¼ºï¼ˆslide_title + slide_reasonï¼‰

**ä¼˜åŒ–**ï¼š
- âš¡ æ€§èƒ½æå‡ 3-5 å€ï¼ˆæ™ºèƒ½åˆ†å±‚è¯„ä¼°ï¼‰
- âš¡ å‡å°‘ 85% LLM è°ƒç”¨æˆæœ¬
- âš¡ URL è§„èŒƒåŒ–å»é‡ï¼ˆå»é™¤ tracking å‚æ•°ï¼‰

**ä¿®å¤**ï¼š
- ğŸ› ä¿®å¤ä¸­æ–‡å…³é”®è¯åŒ¹é…é—®é¢˜ï¼ˆ`\b` è¾¹ç•Œä¸é€‚ç”¨ï¼‰
- ğŸ› ä¿®å¤ summary å­—æ®µåŒ…å« markdown æ ‡ç­¾é—®é¢˜
- ğŸ› ä¼˜åŒ–ä¸º"é¦–æ®µ + å°¾æ®µ"æ‘˜è¦ç­–ç•¥

### v1.0.0 (2026-01-XX)

- åˆå§‹ç‰ˆæœ¬
- æ”¯æŒ crawl4ai + CAMEL Agent æ¡†æ¶
- åŸºç¡€æ·±åº¦çˆ¬å–åŠŸèƒ½

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“„ è®¸å¯è¯

MIT License
